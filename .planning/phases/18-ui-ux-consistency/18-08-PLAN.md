---
phase: 18-ui-ux-consistency
plan: 08
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/web/src/app/packages/page.tsx
  - apps/web/src/app/services/page.tsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Packages page modals use packages/ui Modal component"
    - "Services page modals use packages/ui Modal component"
    - "No custom fixed inset-0 z-50 modal patterns in these files"
  artifacts:
    - path: "apps/web/src/app/packages/page.tsx"
      provides: "Packages with 3 Modal components"
      contains: "import { Modal }"
    - path: "apps/web/src/app/services/page.tsx"
      provides: "Services with 3 Modal components"
      contains: "import { Modal }"
  key_links:
    - from: "apps/web/src/app/packages/page.tsx"
      to: "@peacase/ui Modal"
      via: "import"
    - from: "apps/web/src/app/services/page.tsx"
      to: "@peacase/ui Modal"
      via: "import"
---

<objective>
Migrate packages (3 modals) and services (3 modals) page modals to packages/ui Modal

Purpose: Close Gap 1 (UI-01) part 3 - migrate 2 pages with multiple modals
Output: 2 pages totaling 6 modals using packages/ui Modal
</objective>

<execution_context>
@C:\Users\aaron\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\aaron\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/18-ui-ux-consistency/18-02-SUMMARY.md

@packages/ui/src/components/Modal.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate packages page modals (3 modals)</name>
  <files>apps/web/src/app/packages/page.tsx</files>
  <action>
    Packages has 3 modals (Create, Edit, Delete confirm or similar):

    1. Add import: `import { Modal } from '@peacase/ui';`
    2. Find each custom modal with fixed inset-0 z-50 pattern
    3. Replace each with Modal component:
       - Create/Add modal: `<Modal isOpen={showCreate} onClose={...} title="Create Package" size="lg">`
       - Edit modal: `<Modal isOpen={showEdit} onClose={...} title="Edit Package" size="lg">`
       - Delete confirm: `<Modal isOpen={showDelete} onClose={...} title="Delete Package" size="sm">`
    4. For each modal:
       - Remove outer fixed/backdrop wrapper
       - Remove manual close button/handler
       - Move content to Modal children
       - Keep form fields and buttons in children
    5. For delete confirmation modals, use size="sm"
  </action>
  <verify>
    - grep "fixed inset-0 z-50" apps/web/src/app/packages/page.tsx returns no results
    - grep -c "<Modal" apps/web/src/app/packages/page.tsx shows 3+ occurrences
    - npm run typecheck passes
  </verify>
  <done>Packages page uses packages/ui Modal for all 3 modals</done>
</task>

<task type="auto">
  <name>Task 2: Migrate services page modals (3 modals)</name>
  <files>apps/web/src/app/services/page.tsx</files>
  <action>
    Services has 3 modals (Create, Edit, Delete or similar):

    NOTE: services/page.tsx already has EmptyState imported from @peacase/ui

    1. Update existing import to include Modal:
       `import { EmptyState, Modal } from '@peacase/ui';`
    2. Find each custom modal with fixed inset-0 z-50 pattern
    3. Replace each with Modal component:
       ```tsx
       <Modal
         isOpen={showServiceModal}
         onClose={() => setShowServiceModal(false)}
         title={editingService ? "Edit Service" : "Add Service"}
         size="lg"
       >
         {/* service form */}
       </Modal>
       ```
    4. Pattern for combined add/edit modal:
       - Use conditional title based on editingService state
       - Keep same isOpen logic
       - Keep existing form content
    5. For delete confirmation, use size="sm" and simple content
  </action>
  <verify>
    - grep "fixed inset-0 z-50" apps/web/src/app/services/page.tsx returns no results
    - grep -c "<Modal" apps/web/src/app/services/page.tsx shows 3+ occurrences
    - npm run typecheck passes
  </verify>
  <done>Services page uses packages/ui Modal for all modals</done>
</task>

</tasks>

<verification>
Run after all tasks:
```bash
# Verify no custom modal patterns remain
grep "fixed inset-0 z-50" apps/web/src/app/packages/page.tsx apps/web/src/app/services/page.tsx

# Verify Modal imports present
grep "from '@peacase/ui'" apps/web/src/app/packages/page.tsx apps/web/src/app/services/page.tsx

# TypeScript compilation
npm run typecheck
```
</verification>

<success_criteria>
- [ ] Packages page uses packages/ui Modal for all 3 modals
- [ ] Services page uses packages/ui Modal for all 3 modals
- [ ] No custom fixed inset-0 z-50 patterns in these files
- [ ] TypeScript compiles without errors
- [ ] Commit: feat(18-08): migrate packages, services modals to packages/ui Modal
</success_criteria>

<output>
After completion, create `.planning/phases/18-ui-ux-consistency/18-08-SUMMARY.md`
</output>
