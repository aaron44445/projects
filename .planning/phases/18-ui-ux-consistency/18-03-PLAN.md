---
phase: 18-ui-ux-consistency
plan: 03
type: execute
wave: 2
depends_on: ["18-01"]
files_modified:
  - apps/web/src/app/calendar/page.tsx
autonomous: true

must_haves:
  truths:
    - "Calendar page imports STATUS_COLORS from @/lib/statusColors"
    - "getStatusColor function uses STATUS_COLORS instead of hardcoded colors"
    - "Error banner uses bg-rose/10 border-rose/20 text-rose-dark pattern"
    - "Calendar modals use rose design tokens for errors"
  artifacts:
    - path: "apps/web/src/app/calendar/page.tsx"
      provides: "Calendar page with design system status colors"
      contains: "import { STATUS_COLORS"
  key_links:
    - from: "apps/web/src/app/calendar/page.tsx"
      to: "apps/web/src/lib/statusColors.ts"
      via: "import"
      pattern: "import.*STATUS_COLORS.*@/lib/statusColors"
---

<objective>
Update calendar page to use centralized status colors and design token error states.

Purpose: Eliminate hardcoded status colors (UI-02) and legacy error patterns (UI-03) in the most visually intensive page.
Output: Calendar page with consistent design system colors across all status badges and error states.
</objective>

<execution_context>
@C:\Users\aaron\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\aaron\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/18-ui-ux-consistency/18-01-SUMMARY.md
@apps/web/src/app/calendar/page.tsx
@apps/web/src/lib/statusColors.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update calendar status colors to use design tokens</name>
  <files>apps/web/src/app/calendar/page.tsx</files>
  <action>
Update the calendar page to use centralized status colors:

1. Add import at top of file:
   `import { STATUS_COLORS, type StatusKey } from '@/lib/statusColors';`

2. Replace the getStatusColor function (currently around lines 684-699):
   ```typescript
   // Current hardcoded colors:
   // confirmed: 'bg-green-100 text-green-700'
   // pending: 'bg-yellow-100 text-yellow-700'
   // cancelled: 'bg-red-100 text-red-700'
   // completed: 'bg-blue-100 text-blue-700'
   // no_show: 'bg-gray-100 text-gray-700'

   // New implementation using design tokens:
   const getStatusColor = (status: string) => {
     // Map status to StatusKey (handle underscore variants)
     const normalizedStatus = status.replace('_', '-') as StatusKey;
     const colors = STATUS_COLORS[normalizedStatus] || STATUS_COLORS.pending;
     return `${colors.bg} ${colors.text}`;
   };
   ```

3. Update the error banner (around line 815-828):
   - Replace `bg-red-50 border-red-200` with `bg-rose/10 border-rose/20`
   - Replace `text-red-700` with `text-rose-dark`

4. Update modal error states (New Appointment modal around line 1084-1088, Edit modal around line 1271-1274):
   - Replace `bg-red-50 border-red-200 text-red-700`
   - With `bg-rose/10 border-rose/20 text-rose-dark`

5. Update action button colors in appointment menus (lines 307, 317, 329, 997, 1007, 1017):
   - Replace `text-green-600 hover:bg-green-50` with `text-sage-dark hover:bg-sage/10`
   - Replace `text-orange-600 hover:bg-orange-50` with `text-peach-dark hover:bg-peach/10`
   - Replace `text-red-600 hover:bg-red-50` with `text-rose-dark hover:bg-rose/10`

Note: The status colors in STATUS_COLORS use design system names. The calendar's completed status maps to sage colors (same as confirmed), no_show maps to rose (same as cancelled).
  </action>
  <verify>
1. `npx tsc --noEmit -p apps/web/tsconfig.json` - TypeScript compiles
2. Verify import: `grep -q "import { STATUS_COLORS" apps/web/src/app/calendar/page.tsx`
3. Verify no legacy colors: `! grep -q "bg-red-50\|bg-green-100\|bg-yellow-100\|text-red-700\|text-green-700" apps/web/src/app/calendar/page.tsx`
  </verify>
  <done>Calendar page uses STATUS_COLORS for all status badges and design tokens for error states</done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit -p apps/web/tsconfig.json` - TypeScript passes
2. Import of STATUS_COLORS present
3. No hardcoded red-50, green-100, yellow-100 class patterns
4. getStatusColor function uses STATUS_COLORS object
5. Error banners use rose design tokens
</verification>

<success_criteria>
- Calendar imports and uses STATUS_COLORS from @/lib/statusColors
- getStatusColor returns design system classes (sage, lavender, rose)
- Error states use bg-rose/10 border-rose/20 text-rose-dark
- Action buttons use design system hover colors
- All calendar status badges render with consistent design system colors
</success_criteria>

<output>
After completion, create `.planning/phases/18-ui-ux-consistency/18-03-SUMMARY.md`
</output>
