# Plan 16-04: Skip to Main Content Navigation

---
phase: 16-accessibility-compliance
plan: 04
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/web/src/app/layout.tsx
  - apps/web/src/app/globals.css
autonomous: true

must_haves:
  truths:
    - "Pressing Tab as first action focuses skip link"
    - "Activating skip link moves focus to main content"
    - "Skip link is hidden until focused"
  artifacts:
    - path: "apps/web/src/app/layout.tsx"
      provides: "Skip link and main content landmark"
      min_lines: 20
      contains: "Skip to main content"
    - path: "apps/web/src/app/globals.css"
      provides: "Skip link styles"
      contains: ".skip-link"
  key_links:
    - from: "skip link href"
      to: "main element id"
      via: "anchor navigation"
      pattern: "#main-content"
---

<objective>
Add skip to main content navigation link for keyboard users.

Purpose: WCAG 2.1 SC 2.4.1 (Bypass Blocks) requires a mechanism to skip repeated content like navigation.
Output: Skip link as first focusable element that jumps to main content area.
</objective>

<execution_context>
@C:\Users\aaron\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\aaron\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@apps/web/src/app/layout.tsx
@apps/web/src/app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Add skip link styles to globals.css</name>
  <files>apps/web/src/app/globals.css</files>
  <action>
Add skip link styles in the @layer components section (or end of file):

```css
/* Skip to main content link */
.skip-link {
  @apply absolute bg-charcoal text-white px-4 py-2 font-medium z-[100];
  @apply -translate-y-full focus:translate-y-0;
  @apply transition-transform duration-200;
  top: 0;
  left: 0;
}

.skip-link:focus {
  @apply outline-none ring-2 ring-sage ring-offset-2;
}
```

This keeps the link off-screen until focused, then slides it into view.
  </action>
  <verify>Run `grep "skip-link" apps/web/src/app/globals.css` - should return match</verify>
  <done>Skip link CSS styles defined with hidden-until-focused behavior</done>
</task>

<task type="auto">
  <name>Add skip link and main landmark to layout.tsx</name>
  <files>apps/web/src/app/layout.tsx</files>
  <action>
1. Add the skip link as the first child inside body:
```tsx
<a href="#main-content" className="skip-link">
  Skip to main content
</a>
```

2. Wrap {children} in a main element with the target id:
```tsx
<main id="main-content" tabIndex={-1}>
  {children}
</main>
```

The tabIndex={-1} allows the main element to receive programmatic focus when the skip link is activated.

Final structure should be:
```tsx
<body className="font-sans">
  <a href="#main-content" className="skip-link">
    Skip to main content
  </a>
  <Providers>
    <main id="main-content" tabIndex={-1}>
      {children}
    </main>
  </Providers>
  <CookieConsent />
</body>
```

Note: The main element should be inside Providers since child pages may need context access.
  </action>
  <verify>
Run these commands - both should return matches:
- `grep "Skip to main content" apps/web/src/app/layout.tsx`
- `grep 'id="main-content"' apps/web/src/app/layout.tsx`
  </verify>
  <done>Skip link is first focusable element, main content has id="main-content" with tabIndex={-1}</done>
</task>

<task type="auto">
  <name>Build and verify layout changes</name>
  <files>apps/web/src/app/layout.tsx</files>
  <action>
Run `npm run build -w apps/web` to verify no errors.

This validates that the skip link and main element are correctly structured.
  </action>
  <verify>Build command completes with exit code 0</verify>
  <done>apps/web builds successfully with skip link in layout</done>
</task>

</tasks>

<verification>
```bash
# Verify skip link exists
grep "Skip to main content" apps/web/src/app/layout.tsx

# Verify main element with id
grep 'id="main-content"' apps/web/src/app/layout.tsx

# Verify skip-link styles
grep "skip-link" apps/web/src/app/globals.css
```

All should return matches.

Manual test (if running locally):
1. Open any page in browser
2. Press Tab once
3. Skip link should appear at top-left
4. Press Enter
5. Focus should move to main content area
</verification>

<success_criteria>
- Skip link is first focusable element in body
- Skip link text is "Skip to main content"
- Skip link targets `#main-content`
- Main element has `id="main-content"` and `tabIndex={-1}`
- Skip link is visually hidden until focused
- Build succeeds without errors
</success_criteria>

<output>
After completion, create `.planning/phases/16-accessibility-compliance/16-04-SUMMARY.md`
</output>
