# Plan 16-02: Booking Widget Live Regions and Time Slot Labels

---
phase: 16-accessibility-compliance
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/web/src/app/embed/[slug]/page.tsx
autonomous: true

must_haves:
  truths:
    - "Screen reader announces time slot availability when navigating"
    - "Screen reader announces selection confirmation when slot is selected"
  artifacts:
    - path: "apps/web/src/app/embed/[slug]/page.tsx"
      provides: "Accessible booking widget with ARIA labels and live region"
      contains: "aria-live"
  key_links:
    - from: "apps/web/src/app/embed/[slug]/page.tsx"
      to: "time slot buttons"
      via: "aria-label attribute"
      pattern: "aria-label=.*available"
---

<objective>
Add ARIA live region and descriptive labels to booking widget time slots.

Purpose: Screen reader users need to hear time slot availability and receive confirmation when selecting a slot.
Output: DateTimeStep component with aria-live region and aria-labels on time slot buttons.
</objective>

<execution_context>
@C:\Users\aaron\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\aaron\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@apps/web/src/app/embed/[slug]/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Add aria-live region to DateTimeStep</name>
  <files>apps/web/src/app/embed/[slug]/page.tsx</files>
  <action>
In the DateTimeStep component:

1. Add state for announcement text: `const [announcement, setAnnouncement] = useState('')`

2. Add a visually-hidden live region at the top of the DateTimeStep return:
```tsx
<div
  role="status"
  aria-live="polite"
  aria-atomic="true"
  className="sr-only"
>
  {announcement}
</div>
```

The sr-only class hides it visually but keeps it accessible to screen readers.
  </action>
  <verify>Run `grep "aria-live" apps/web/src/app/embed/[slug]/page.tsx` - should return match</verify>
  <done>DateTimeStep has aria-live region that can announce slot selections</done>
</task>

<task type="auto">
  <name>Add aria-label to time slot buttons</name>
  <files>apps/web/src/app/embed/[slug]/page.tsx</files>
  <action>
Update the time slot button (around line 635) to include aria-label and update announcement on click:

```tsx
<button
  key={slot.time}
  onClick={() => {
    setAnnouncement(`${formatTime(slot.time)} selected`);
    onTimeSelect(slot.time);
  }}
  aria-label={`${formatTime(slot.time)}, ${slot.available !== false ? 'available' : 'unavailable'}`}
  disabled={slot.available === false}
  className={...}
  style={...}
>
  {formatTime(slot.time)}
</button>
```

This gives screen reader users context about each slot's availability and confirms their selection.
  </action>
  <verify>Run `grep -A 2 "slot.time" apps/web/src/app/embed/[slug]/page.tsx | grep "aria-label"` - should return match</verify>
  <done>Time slot buttons have descriptive aria-labels with time and availability status</done>
</task>

</tasks>

<verification>
```bash
# Verify aria-label on time slots
grep -A 2 "slot.time" apps/web/src/app/embed/\[slug\]/page.tsx | grep "aria-label"

# Verify aria-live region
grep "aria-live" apps/web/src/app/embed/\[slug\]/page.tsx
```

Both should return matches.
</verification>

<success_criteria>
- Time slot buttons have `aria-label` with time and availability
- Live region with `role="status"` and `aria-live="polite"` exists
- Selecting a time slot updates the live region text
</success_criteria>

<output>
After completion, create `.planning/phases/16-accessibility-compliance/16-02-SUMMARY.md`
</output>
