# Plan 16-06: Text Contrast - Batch Component Updates

---
phase: 16-accessibility-compliance
plan: 06
type: execute
wave: 2
depends_on: [16-05]
files_modified:
  - apps/web/src/components/AppSidebar.tsx
  - apps/web/src/components/NotificationDropdown.tsx
  - apps/web/src/components/HelpBot.tsx
  - apps/web/src/components/LocationSwitcher.tsx
  - apps/web/src/components/FeatureGate.tsx
  - apps/web/src/app/page.tsx
  - apps/web/src/app/dashboard/page.tsx
  - apps/web/src/app/settings/page.tsx
  - packages/ui/src/components/StatCard.tsx
  - packages/ui/src/components/Card.tsx
  - packages/ui/src/components/Input.tsx
autonomous: true

must_haves:
  truths:
    - "Key user-facing components use WCAG-compliant text colors"
    - "Opacity-based text patterns significantly reduced in codebase"
  artifacts:
    - path: "apps/web/src/components/AppSidebar.tsx"
      provides: "Sidebar with compliant text colors"
    - path: "apps/web/src/app/dashboard/page.tsx"
      provides: "Dashboard with compliant text colors"
  key_links:
    - from: "components"
      to: "tailwind.config.ts"
      via: "text-text-muted/text-text-secondary classes"
      pattern: "text-text-(muted|secondary)"
---

<objective>
Batch update remaining components to use WCAG-compliant text colors.

Purpose: Complete the contrast compliance work by updating all key user-facing components.
Output: Reduced usage of text-charcoal/50, text-charcoal/60, text-charcoal/70 across the codebase.
</objective>

<execution_context>
@C:\Users\aaron\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\aaron\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/16-accessibility-compliance/16-05-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Update web app components with compliant text colors</name>
  <files>
apps/web/src/components/AppSidebar.tsx
apps/web/src/components/NotificationDropdown.tsx
apps/web/src/components/HelpBot.tsx
apps/web/src/components/LocationSwitcher.tsx
apps/web/src/components/FeatureGate.tsx
  </files>
  <action>
For each component, replace problematic opacity patterns:
- `text-charcoal/50` -> `text-text-muted`
- `text-charcoal/60` -> `text-text-muted`
- `text-charcoal/70` -> `text-text-muted` or `text-text-secondary` (depending on visual importance)

Keep non-text usages unchanged:
- `bg-charcoal/50` - backgrounds don't need contrast compliance
- `border-charcoal/50` - borders are decorative

Use `text-text-secondary` for slightly more prominent secondary text, `text-text-muted` for captions and less important text.
  </action>
  <verify>Run `grep -c "text-charcoal/[567]0" apps/web/src/components/AppSidebar.tsx` - should return 0 or much lower count</verify>
  <done>Web app components use compliant text colors</done>
</task>

<task type="auto">
  <name>Update page files with compliant text colors</name>
  <files>
apps/web/src/app/page.tsx
apps/web/src/app/dashboard/page.tsx
apps/web/src/app/settings/page.tsx
  </files>
  <action>
For each page, replace:
- `text-charcoal/50` -> `text-text-muted`
- `text-charcoal/60` -> `text-text-muted`
- `text-charcoal/70` -> `text-text-muted`

These are high-traffic pages that users interact with regularly.
  </action>
  <verify>Run `grep -c "text-charcoal/[567]0" apps/web/src/app/dashboard/page.tsx` - should return 0 or much lower count</verify>
  <done>Landing page, dashboard, and settings use compliant text colors</done>
</task>

<task type="auto">
  <name>Update packages/ui components with compliant text colors</name>
  <files>
packages/ui/src/components/StatCard.tsx
packages/ui/src/components/Card.tsx
packages/ui/src/components/Input.tsx
  </files>
  <action>
For each UI component, replace failing opacity patterns:
- `text-charcoal/50` -> `text-text-muted`
- `text-charcoal/60` -> `text-text-muted`
- `text-charcoal/70` -> `text-text-muted`

These shared components affect the entire app.
  </action>
  <verify>Run `grep -c "text-charcoal/[567]0" packages/ui/src/components/*.tsx 2>/dev/null | grep -v ":0$"` - should return minimal or no matches</verify>
  <done>Shared UI components use compliant text colors</done>
</task>

<task type="auto">
  <name>Build and verify all changes</name>
  <files>apps/web, packages/ui</files>
  <action>
1. Run `npm run build -w packages/ui` to verify UI components compile
2. Run `npm run build -w apps/web` to verify web app compiles

Then count remaining problematic patterns:
```bash
grep -r "text-charcoal/[567]0" apps/web/src --include="*.tsx" | wc -l
```

Target: Significant reduction from original count (was 46+ files).
  </action>
  <verify>Both builds complete with exit code 0, remaining pattern count is significantly reduced</verify>
  <done>All packages build successfully, opacity-based text patterns significantly reduced</done>
</task>

</tasks>

<verification>
```bash
# Verify builds pass
npm run build -w packages/ui
npm run build -w apps/web

# Count remaining problematic patterns (should be significantly reduced)
grep -r "text-charcoal/[567]0" apps/web/src --include="*.tsx" | wc -l

# Verify key components updated
grep "text-text-muted\|text-text-secondary" apps/web/src/components/AppSidebar.tsx
```
</verification>

<success_criteria>
- Key user-facing components updated (AppSidebar, dashboard, settings)
- packages/ui components updated (StatCard, Card, Input)
- Build succeeds without errors
- Opacity-based text patterns significantly reduced in components
</success_criteria>

<output>
After completion, create `.planning/phases/16-accessibility-compliance/16-06-SUMMARY.md`
</output>
