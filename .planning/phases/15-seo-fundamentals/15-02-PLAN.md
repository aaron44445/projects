---
phase: 15-seo-fundamentals
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/web/src/app/layout.tsx
  - apps/web/src/app/page.tsx
  - apps/web/src/components/OrganizationSchema.tsx
autonomous: true

must_haves:
  truths:
    - "All public pages have canonical URLs in HTML head"
    - "Landing page has Organization JSON-LD schema in page source"
    - "Schema includes @context, @type, name, url, logo, description"
    - "metadataBase is set once in root layout"
  artifacts:
    - path: "apps/web/src/app/layout.tsx"
      provides: "metadataBase and alternates.canonical configuration"
      contains: "metadataBase"
    - path: "apps/web/src/components/OrganizationSchema.tsx"
      provides: "JSON-LD Organization structured data component"
      exports: ["OrganizationSchema"]
    - path: "apps/web/src/app/page.tsx"
      provides: "Landing page with Organization schema"
      contains: "OrganizationSchema"
  key_links:
    - from: "apps/web/src/app/layout.tsx"
      to: "canonical URLs"
      via: "metadata.alternates.canonical"
      pattern: "alternates.*canonical"
    - from: "apps/web/src/app/page.tsx"
      to: "apps/web/src/components/OrganizationSchema.tsx"
      via: "import and render"
      pattern: "OrganizationSchema"
---

<objective>
Add canonical URL support via metadataBase and implement Organization JSON-LD structured data on landing page.

Purpose: Ensure search engines understand canonical URLs for all pages and recognize Peacase as an Organization entity with rich search result eligibility.

Output: Updated layout.tsx with metadataBase, new OrganizationSchema component, updated page.tsx with schema.
</objective>

<execution_context>
@C:\Users\aaron\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\aaron\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/15-seo-fundamentals/15-CONTEXT.md
@.planning/phases/15-seo-fundamentals/15-RESEARCH.md
@apps/web/src/app/layout.tsx
@apps/web/src/app/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add metadataBase to root layout</name>
  <files>apps/web/src/app/layout.tsx</files>
  <action>
Update apps/web/src/app/layout.tsx to add metadataBase for canonical URL support.

Add to the existing metadata export:
- metadataBase: new URL(process.env.NEXT_PUBLIC_APP_URL || 'https://peacase.com')
- alternates: { canonical: './' }

The metadataBase sets the base URL for all relative metadata URLs.
The alternates.canonical: './' tells Next.js to use the current page path as canonical.

Keep all existing metadata properties (title, description, keywords, authors, creator, openGraph, twitter, robots).
  </action>
  <verify>
1. File updated with metadataBase
2. TypeScript compiles: cd apps/web && npx tsc --noEmit src/app/layout.tsx
3. View page source of http://localhost:3000 - should have link rel="canonical" href="https://peacase.com/"
  </verify>
  <done>
Root layout has metadataBase set to peacase.com and alternates.canonical configured for automatic canonical URLs on all pages
  </done>
</task>

<task type="auto">
  <name>Task 2: Create OrganizationSchema component</name>
  <files>apps/web/src/components/OrganizationSchema.tsx</files>
  <action>
Create apps/web/src/components/OrganizationSchema.tsx as a server component that renders JSON-LD.

The component should:
1. Define a schema object with Organization type
2. Include: @context (schema.org), @type (Organization), name (Peacase), url, logo, description, contactPoint, sameAs
3. Render a script tag with type="application/ld+json" containing JSON.stringify(schema)

Schema properties:
- @context: 'https://schema.org'
- @type: 'Organization'
- name: 'Peacase'
- url: 'https://peacase.com'
- logo: 'https://peacase.com/logo.png'
- description: 'Premium spa and salon management software. Everything you need to run your salon. Nothing you dont.'
- contactPoint: { @type: 'ContactPoint', email: 'support@peacase.com', contactType: 'customer service' }
- sameAs: ['https://twitter.com/peacase', 'https://linkedin.com/company/peacase', 'https://instagram.com/peacase']

Note: This is NOT a 'use client' component - it renders on server as static JSON-LD script tag.
Note: Using JSON.stringify with hardcoded data is safe for script injection since content is not user-provided.
  </action>
  <verify>
1. File exists at apps/web/src/components/OrganizationSchema.tsx
2. TypeScript compiles: cd apps/web && npx tsc --noEmit src/components/OrganizationSchema.tsx
  </verify>
  <done>
OrganizationSchema component exports a function that renders JSON-LD script with Organization type, name, url, logo, description, contactPoint, and sameAs properties
  </done>
</task>

<task type="auto">
  <name>Task 3: Add OrganizationSchema to landing page</name>
  <files>apps/web/src/app/page.tsx</files>
  <action>
Update apps/web/src/app/page.tsx to include OrganizationSchema.

The page.tsx is currently a 'use client' component. The JSON-LD can still be rendered inside a client component.

1. Add import at top: import { OrganizationSchema } from '@/components/OrganizationSchema';

2. Add OrganizationSchema inside the return, right after the opening div:
   - Place it as first child inside the main div
   - Before the Navigation component

The script tag will render in the HTML body. While head is preferred, body is valid for JSON-LD and Google parses it correctly.
  </action>
  <verify>
1. File updated with OrganizationSchema import and render
2. TypeScript compiles: cd apps/web && npx tsc --noEmit src/app/page.tsx
3. View page source of http://localhost:3000 - should contain script type="application/ld+json" with Organization schema
4. Validate at https://search.google.com/test/rich-results (paste page URL or source)
  </verify>
  <done>
Landing page imports and renders OrganizationSchema component, resulting in JSON-LD Organization structured data in page source
  </done>
</task>

</tasks>

<verification>
After all tasks complete:

1. Start dev server: cd apps/web && npm run dev
2. Verify canonical URL:
   - View source of http://localhost:3000
   - Find link rel="canonical" href="https://peacase.com/"
   - Check /pricing - canonical should be https://peacase.com/pricing
3. Verify JSON-LD:
   - View source of http://localhost:3000
   - Find script type="application/ld+json"
   - Verify JSON contains "@type": "Organization"
   - Verify JSON contains "name": "Peacase"
   - Verify JSON contains "url": "https://peacase.com"
   - Verify JSON contains "logo": "https://peacase.com/logo.png"
4. TypeScript check: cd apps/web && npx tsc --noEmit
5. Optional: Test at https://search.google.com/test/rich-results
</verification>

<success_criteria>
- metadataBase is set in root layout.tsx
- All pages automatically get canonical URLs via alternates.canonical
- OrganizationSchema component renders valid JSON-LD
- Landing page includes Organization structured data in page source
- No TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/15-seo-fundamentals/15-02-SUMMARY.md`
</output>
