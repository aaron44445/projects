---
phase: 24-technical-debt
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/web/src/app/demo/page.tsx
  - apps/web/src/app/forgot-password/page.tsx
  - apps/web/src/app/login/page.tsx
  - apps/web/src/app/signup/page.tsx
  - apps/web/src/app/reset-password/page.tsx
  - apps/web/src/app/verify-email/page.tsx
  - apps/web/src/app/onboarding/page.tsx
  - apps/web/src/app/setup/page.tsx
  - apps/web/src/app/locations/page.tsx
  - apps/web/src/app/services/page.tsx
  - apps/web/src/app/clients/page.tsx
  - apps/web/src/app/calendar/page.tsx
  - apps/web/src/app/reports/page.tsx
  - apps/web/src/app/marketing/page.tsx
  - apps/web/src/app/settings/page.tsx
  - apps/web/src/app/pricing/page.tsx
  - apps/web/src/app/gift-cards/page.tsx
  - apps/web/src/app/packages/page.tsx
  - apps/web/src/app/portal/data/page.tsx
  - apps/web/src/app/privacy/page.tsx
  - apps/web/src/app/terms/page.tsx
  - apps/web/src/components/CookieConsent.tsx
  - apps/web/src/components/ErrorBoundary.tsx
  - apps/web/src/components/StaffAuthGuard.tsx
  - apps/web/src/components/PasswordChecklist.tsx
  - apps/web/src/components/NotificationDropdown.tsx
autonomous: true

must_haves:
  truths:
    - "All body text meets WCAG 2.1 AA contrast requirements (4.5:1 minimum)"
    - "No charcoal/50, charcoal/60, or charcoal/70 opacity modifiers remain in text classes"
    - "Semantic text tokens (text-text-primary, text-text-secondary, text-text-muted) used consistently"
  artifacts:
    - path: "apps/web/src/app/clients/page.tsx"
      provides: "High-traffic owner page with compliant contrast"
      contains: "text-text-secondary"
    - path: "apps/web/src/app/calendar/page.tsx"
      provides: "Calendar page with compliant contrast"
      contains: "text-text-secondary"
  key_links:
    - from: "All UI components"
      to: "tailwind.config.ts text tokens"
      via: "Tailwind class compilation"
      pattern: "text-text-(primary|secondary|muted)"
---

<objective>
Migrate all low-contrast text patterns to WCAG 2.1 AA compliant semantic tokens.

Purpose: Resolve DEBT-02 accessibility compliance issue where ~497 instances of opacity-based text colors (charcoal/50, /60, /70) fail WCAG 2.1 AA contrast requirements. The tailwind.config.ts already defines compliant tokens (text-text-primary, text-text-secondary, text-text-muted) that were added in Phase 16 but never fully adopted.

Output: All owner-facing pages use semantic text tokens with guaranteed 4.5:1+ contrast ratios.
</objective>

<execution_context>
@C:\Users\aaron\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\aaron\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/24-technical-debt/24-RESEARCH.md
@apps/web/tailwind.config.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate Owner Dashboard Pages Contrast</name>
  <files>
    apps/web/src/app/clients/page.tsx
    apps/web/src/app/calendar/page.tsx
    apps/web/src/app/reports/page.tsx
    apps/web/src/app/marketing/page.tsx
    apps/web/src/app/settings/page.tsx
    apps/web/src/app/locations/page.tsx
    apps/web/src/app/services/page.tsx
  </files>
  <action>
    Search and replace low-contrast text patterns in owner dashboard pages:

    Migration mapping:
    - text-charcoal/70 → text-charcoal (already 7:1+, just remove opacity)
    - text-charcoal/60 → text-text-secondary (#4A4A4A, 9:1 contrast)
    - text-charcoal/50 → text-text-muted (#7A7A7A, 4.6:1 contrast)

    For each file:
    1. Replace all instances of `text-charcoal/70` with `text-charcoal`
    2. Replace all instances of `text-charcoal/60` with `text-text-secondary`
    3. Replace all instances of `text-charcoal/50` with `text-text-muted`

    DO NOT change:
    - bg-charcoal/* (background opacity is fine)
    - border-charcoal/* (border opacity is fine)
    - Intentionally dimmed states (e.g., disabled buttons with opacity)
  </action>
  <verify>
    Run: grep -r "text-charcoal/(50|60|70)" apps/web/src/app/{clients,calendar,reports,marketing,settings,locations,services}/page.tsx
    Expected: No matches (all patterns migrated)
  </verify>
  <done>
    All 7 owner dashboard pages use semantic text tokens with WCAG compliant contrast.
  </done>
</task>

<task type="auto">
  <name>Task 2: Migrate Auth and Onboarding Pages Contrast</name>
  <files>
    apps/web/src/app/demo/page.tsx
    apps/web/src/app/forgot-password/page.tsx
    apps/web/src/app/login/page.tsx
    apps/web/src/app/signup/page.tsx
    apps/web/src/app/reset-password/page.tsx
    apps/web/src/app/verify-email/page.tsx
    apps/web/src/app/onboarding/page.tsx
    apps/web/src/app/setup/page.tsx
  </files>
  <action>
    Search and replace low-contrast text patterns in auth and onboarding pages:

    Migration mapping (same as Task 1):
    - text-charcoal/70 → text-charcoal
    - text-charcoal/60 → text-text-secondary
    - text-charcoal/50 → text-text-muted

    For each file:
    1. Replace all instances of `text-charcoal/70` with `text-charcoal`
    2. Replace all instances of `text-charcoal/60` with `text-text-secondary`
    3. Replace all instances of `text-charcoal/50` with `text-text-muted`

    Note: setup/page.tsx has ~57 instances - the highest count. Ensure all are migrated.
  </action>
  <verify>
    Run: grep -r "text-charcoal/(50|60|70)" apps/web/src/app/{demo,forgot-password,login,signup,reset-password,verify-email,onboarding,setup}/page.tsx
    Expected: No matches
  </verify>
  <done>
    All 8 auth/onboarding pages use semantic text tokens with WCAG compliant contrast.
  </done>
</task>

<task type="auto">
  <name>Task 3: Migrate Remaining Pages and Shared Components</name>
  <files>
    apps/web/src/app/pricing/page.tsx
    apps/web/src/app/gift-cards/page.tsx
    apps/web/src/app/packages/page.tsx
    apps/web/src/app/portal/data/page.tsx
    apps/web/src/app/privacy/page.tsx
    apps/web/src/app/terms/page.tsx
    apps/web/src/components/CookieConsent.tsx
    apps/web/src/components/ErrorBoundary.tsx
    apps/web/src/components/StaffAuthGuard.tsx
    apps/web/src/components/PasswordChecklist.tsx
    apps/web/src/components/NotificationDropdown.tsx
  </files>
  <action>
    Search and replace low-contrast text patterns in remaining pages and shared components:

    Migration mapping (same as previous tasks):
    - text-charcoal/70 → text-charcoal
    - text-charcoal/60 → text-text-secondary
    - text-charcoal/50 → text-text-muted

    For each file:
    1. Replace all instances of `text-charcoal/70` with `text-charcoal`
    2. Replace all instances of `text-charcoal/60` with `text-text-secondary`
    3. Replace all instances of `text-charcoal/50` with `text-text-muted`

    Shared components (CookieConsent, ErrorBoundary, etc.) are used across the app, so fixing them has high impact.
  </action>
  <verify>
    Run: grep -r "text-charcoal/(50|60|70)" apps/web/src/app/{pricing,gift-cards,packages,portal,privacy,terms} apps/web/src/components/{CookieConsent,ErrorBoundary,StaffAuthGuard,PasswordChecklist,NotificationDropdown}.tsx
    Expected: No matches

    Final verification across entire apps/web/src:
    Run: grep -rE "text-charcoal/(50|60|70)" apps/web/src/app apps/web/src/components --include="*.tsx" | grep -v "staff/"
    Expected: No matches in owner-facing code (staff portal handled in Task 4)
  </verify>
  <done>
    All remaining owner-facing pages and shared components use semantic text tokens.
  </done>
</task>

</tasks>

<verification>
1. Build check: `npm run build` in apps/web passes without TypeScript errors
2. Pattern check: `grep -rE "text-charcoal/(50|60|70)" apps/web/src --include="*.tsx"` returns only:
   - tailwind.config.ts (token definition comments - OK)
   - Staff portal pages (handled in Plan 24-02)
3. Visual spot-check: Load /clients, /calendar, /login pages - text should be readable with good contrast
</verification>

<success_criteria>
- Zero instances of text-charcoal/50, /60, /70 in owner-facing pages
- All migrated text uses text-text-primary, text-text-secondary, or text-text-muted
- Build passes without errors
- No visual regressions (text still readable, no broken layouts)
</success_criteria>

<output>
After completion, create `.planning/phases/24-technical-debt/24-01-SUMMARY.md`
</output>
